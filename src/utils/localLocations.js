/**
 * Predefined Guwahati Locations
 * 
 * Local database of common locations to reduce API calls.
 * These are shown instantly without any API request.
 */

export const GUWAHATI_LOCATIONS = [
  // Major Areas
  { name: "Ulubari", fullAddress: "Ulubari, Guwahati, Assam, India", type: "area" },
  { name: "Panbazar", fullAddress: "Panbazar, Guwahati, Assam, India", type: "area" },
  { name: "Ganeshguri", fullAddress: "Ganeshguri, Guwahati, Assam, India", type: "area" },
  { name: "Beltola", fullAddress: "Beltola, Guwahati, Assam, India", type: "area" },
  { name: "Jalukbari", fullAddress: "Jalukbari, Guwahati, Assam, India", type: "area" },
  { name: "Six Mile", fullAddress: "Six Mile, Guwahati, Assam, India", type: "area" },
  { name: "Zoo Road", fullAddress: "Zoo Road, Guwahati, Assam, India", type: "area" },
  { name: "Chandmari", fullAddress: "Chandmari, Guwahati, Assam, India", type: "area" },
  { name: "Maligaon", fullAddress: "Maligaon, Guwahati, Assam, India", type: "area" },
  { name: "Dispur", fullAddress: "Dispur, Guwahati, Assam, India", type: "area" },
  { name: "Bhangagarh", fullAddress: "Bhangagarh, Guwahati, Assam, India", type: "area" },
  { name: "Khanapara", fullAddress: "Khanapara, Guwahati, Assam, India", type: "area" },
  { name: "Hatigaon", fullAddress: "Hatigaon, Guwahati, Assam, India", type: "area" },
  { name: "Kahilipara", fullAddress: "Kahilipara, Guwahati, Assam, India", type: "area" },
  { name: "Basistha", fullAddress: "Basistha, Guwahati, Assam, India", type: "area" },
  { name: "Bhetapara", fullAddress: "Bhetapara, Guwahati, Assam, India", type: "area" },
  { name: "Narengi", fullAddress: "Narengi, Guwahati, Assam, India", type: "area" },
  { name: "Noonmati", fullAddress: "Noonmati, Guwahati, Assam, India", type: "area" },
  { name: "Rehabari", fullAddress: "Rehabari, Guwahati, Assam, India", type: "area" },
  { name: "Silpukhuri", fullAddress: "Silpukhuri, Guwahati, Assam, India", type: "area" },
  { name: "Uzanbazar", fullAddress: "Uzanbazar, Guwahati, Assam, India", type: "area" },
  { name: "Lakhtokia", fullAddress: "Lakhtokia, Guwahati, Assam, India", type: "area" },
  { name: "Athgaon", fullAddress: "Athgaon, Guwahati, Assam, India", type: "area" },
  { name: "Paltan Bazar", fullAddress: "Paltan Bazar, Guwahati, Assam, India", type: "area" },
  { name: "Fancy Bazar", fullAddress: "Fancy Bazar, Guwahati, Assam, India", type: "area" },
  { name: "Ambari", fullAddress: "Ambari, Guwahati, Assam, India", type: "area" },
  { name: "Lachit Nagar", fullAddress: "Lachit Nagar, Guwahati, Assam, India", type: "area" },
  { name: "Christian Basti", fullAddress: "Christian Basti, Guwahati, Assam, India", type: "area" },
  { name: "Satgaon", fullAddress: "Satgaon, Guwahati, Assam, India", type: "area" },
  { name: "Lokhra", fullAddress: "Lokhra, Guwahati, Assam, India", type: "area" },
  { name: "Garchuk", fullAddress: "Garchuk, Guwahati, Assam, India", type: "area" },
  { name: "VIP Road", fullAddress: "VIP Road, Guwahati, Assam, India", type: "area" },
  { name: "GS Road", fullAddress: "GS Road, Guwahati, Assam, India", type: "area" },
  { name: "RGB Road", fullAddress: "RGB Road, Guwahati, Assam, India", type: "area" },
  { name: "AT Road", fullAddress: "AT Road, Guwahati, Assam, India", type: "area" },
  
  // Transport Hubs
  { name: "Guwahati Railway Station", fullAddress: "Guwahati Railway Station, Paltan Bazar, Guwahati, Assam", type: "transport" },
  { name: "Kamakhya Railway Station", fullAddress: "Kamakhya Railway Station, Guwahati, Assam", type: "transport" },
  { name: "LGBI Airport", fullAddress: "Lokpriya Gopinath Bordoloi International Airport, Borjhar, Guwahati", type: "transport" },
  { name: "Guwahati Airport", fullAddress: "Lokpriya Gopinath Bordoloi International Airport, Borjhar, Guwahati", type: "transport" },
  { name: "ISBT Guwahati", fullAddress: "ISBT, Betkuchi, Guwahati, Assam", type: "transport" },
  { name: "Adabari Bus Stand", fullAddress: "Adabari Bus Stand, Guwahati, Assam", type: "transport" },
  { name: "Paltan Bazar Bus Stand", fullAddress: "Paltan Bazar Bus Stand, Guwahati, Assam", type: "transport" },
  
  // Landmarks & Temples
  { name: "Kamakhya Temple", fullAddress: "Kamakhya Temple, Nilachal Hill, Guwahati, Assam", type: "landmark" },
  { name: "Umananda Temple", fullAddress: "Umananda Temple, Peacock Island, Guwahati, Assam", type: "landmark" },
  { name: "Navagraha Temple", fullAddress: "Navagraha Temple, Chitrachal Hill, Guwahati, Assam", type: "landmark" },
  { name: "Assam State Zoo", fullAddress: "Assam State Zoo, RG Baruah Road, Guwahati, Assam", type: "landmark" },
  { name: "Guwahati Planetarium", fullAddress: "Guwahati Planetarium, Uzanbazar, Guwahati, Assam", type: "landmark" },
  { name: "Srimanta Sankardev Kalakshetra", fullAddress: "Srimanta Sankardev Kalakshetra, Panjabari, Guwahati, Assam", type: "landmark" },
  
  // Shopping & Markets
  { name: "City Centre Mall", fullAddress: "City Centre Mall, Christian Basti, Guwahati, Assam", type: "shopping" },
  { name: "Vishal Mega Mart Six Mile", fullAddress: "Vishal Mega Mart, Six Mile, Guwahati, Assam", type: "shopping" },
  { name: "Big Bazaar Guwahati", fullAddress: "Big Bazaar, GS Road, Guwahati, Assam", type: "shopping" },
  { name: "Hub Mall", fullAddress: "Hub Mall, Khanapara, Guwahati, Assam", type: "shopping" },
  
  // Hospitals
  { name: "GMCH", fullAddress: "Gauhati Medical College and Hospital, Bhangagarh, Guwahati, Assam", type: "hospital" },
  { name: "Gauhati Medical College", fullAddress: "Gauhati Medical College and Hospital, Bhangagarh, Guwahati, Assam", type: "hospital" },
  { name: "Nemcare Hospital", fullAddress: "Nemcare Hospital, Bhangagarh, Guwahati, Assam", type: "hospital" },
  { name: "Down Town Hospital", fullAddress: "Down Town Hospital, Dispur, Guwahati, Assam", type: "hospital" },
  { name: "GNRC Hospital", fullAddress: "GNRC Hospital, Six Mile, Guwahati, Assam", type: "hospital" },
  { name: "Hayat Hospital", fullAddress: "Hayat Hospital, Dispur, Guwahati, Assam", type: "hospital" },
  { name: "Excelcare Hospital", fullAddress: "Excelcare Hospital, Hatigaon, Guwahati, Assam", type: "hospital" },
  
  // Educational Institutions
  { name: "Gauhati University", fullAddress: "Gauhati University, Jalukbari, Guwahati, Assam", type: "education" },
  { name: "IIT Guwahati", fullAddress: "Indian Institute of Technology Guwahati, North Guwahati, Assam", type: "education" },
  { name: "Cotton University", fullAddress: "Cotton University, Panbazar, Guwahati, Assam", type: "education" },
  { name: "Handique Girls College", fullAddress: "Handique Girls College, Panbazar, Guwahati, Assam", type: "education" },
  { name: "Don Bosco University", fullAddress: "Assam Don Bosco University, Azara, Guwahati, Assam", type: "education" },
  
  // Hotels
  { name: "Vivanta Guwahati", fullAddress: "Vivanta Guwahati, GS Road, Guwahati, Assam", type: "hotel" },
  { name: "Radisson Blu Guwahati", fullAddress: "Radisson Blu, Basistha, Guwahati, Assam", type: "hotel" },
  { name: "Novotel Guwahati", fullAddress: "Novotel Guwahati, GS Road, Guwahati, Assam", type: "hotel" },
];

/**
 * Search local locations by query
 * @param {string} query - Search query
 * @param {number} maxResults - Maximum results to return
 * @returns {Array} Matching locations
 */
export function searchLocalLocations(query, maxResults = 5) {
  if (!query || query.length < 2) {
    return [];
  }

  const normalizedQuery = query.toLowerCase().trim();
  const words = normalizedQuery.split(/\s+/);

  // Score-based matching for better results
  const scored = GUWAHATI_LOCATIONS.map((loc) => {
    const nameLower = loc.name.toLowerCase();
    const addressLower = loc.fullAddress.toLowerCase();
    let score = 0;

    // Exact match on name - highest priority
    if (nameLower === normalizedQuery) {
      score += 100;
    }
    // Name starts with query
    else if (nameLower.startsWith(normalizedQuery)) {
      score += 80;
    }
    // Name contains query
    else if (nameLower.includes(normalizedQuery)) {
      score += 60;
    }
    // Address contains query
    else if (addressLower.includes(normalizedQuery)) {
      score += 40;
    }

    // Bonus for matching multiple words
    words.forEach((word) => {
      if (word.length >= 3) {
        if (nameLower.includes(word)) score += 10;
        if (addressLower.includes(word)) score += 5;
      }
    });

    return { ...loc, score };
  });

  // Filter, sort by score, and limit results
  return scored
    .filter((loc) => loc.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, maxResults)
    .map(({ score, ...loc }) => loc); // Remove score from final result
}

/**
 * Get location type icon
 * @param {string} type - Location type
 * @returns {string} Icon emoji
 */
export function getLocationIcon(type) {
  const icons = {
    area: "üìç",
    transport: "üöâ",
    landmark: "üèõÔ∏è",
    shopping: "üõí",
    hospital: "üè•",
    education: "üéì",
    hotel: "üè®",
    default: "üìç",
  };
  return icons[type] || icons.default;
}
